<section class="wrap">
  <div class="main-container">
    <div class="content">
      <header class="toolbar">
        <h1 class="title">ğŸ“š Mis Materias</h1>
        <div class="toolbar-actions">
          <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input [(ngModel)]="query" placeholder="Buscar materias..." class="search-input"/>
          </div>
          <button (click)="reload()" class="btn btn-secondary" [disabled]="loading">
            <span class="icon">ğŸ”„</span> {{ loading ? 'Cargando...' : 'Actualizar' }}
          </button>
        </div>
      </header>

      <div class="empty-state" *ngIf="loading">
        <div class="empty-icon">â³</div>
        <h3>Cargando materias...</h3>
        <p>Por favor espera un momento</p>
      </div>

      <div class="empty-state" *ngIf="!loading && filtered().length === 0 && query === ''">
        <div class="empty-icon">ğŸ“–</div>
        <h3>No hay materias todavÃ­a</h3>
        <p>Comienza agregando tu primera materia abajo</p>
      </div>

      <div class="empty-state" *ngIf="!loading && filtered().length === 0 && query !== ''">
        <div class="empty-icon">ğŸ”</div>
        <h3>No se encontraron resultados</h3>
        <p>Intenta con otro tÃ©rmino de bÃºsqueda</p>
      </div>

      <ul class="grid" *ngIf="!loading && filtered().length > 0">
        <li *ngFor="let s of filtered()" class="card">
          <div class="card-header">
            <h3 class="card-title">{{ s.name }}</h3>
          </div>
          <div class="card-content">
            <p class="objective"><strong>ğŸ“‹ Objetivo:</strong> {{ s.objective }}</p>
            <p class="content"><strong>ğŸ“ Contenido:</strong> {{ s.content }}</p>
          </div>
          <div class="card-actions">
            <button (click)="edit(s)" class="btn btn-edit">
              <span class="icon">âœï¸</span> Editar
            </button>
            <button (click)="remove(s)" class="btn btn-delete">
              <span class="icon">ğŸ—‘ï¸</span> Eliminar
            </button>
          </div>
        </li>
      </ul>

      <footer class="add-section">
        <h3 class="add-title">â• Agregar Nueva Materia</h3>
        <div class="add-form">
          <input 
            [(ngModel)]="newName" 
            placeholder="Nombre de la materia *" 
            class="input-text"
            [disabled]="loadingAdd"
          />
          <textarea
            [(ngModel)]="newObjective"
            placeholder="Objetivo *"
            class="input-textarea"
            rows="2"
            [disabled]="loadingAdd"
          ></textarea>
          <textarea
            [(ngModel)]="newContent"
            placeholder="Contenido *"
            class="input-textarea"
            rows="3"
            [disabled]="loadingAdd"
          ></textarea>
          <button (click)="add()" class="btn btn-primary btn-full" [disabled]="loadingAdd">
            <span class="icon">â•</span> {{ loadingAdd ? 'Agregando...' : 'Agregar Materia' }}
          </button>
        </div>
      </footer>
    </div>

    <aside class="sidebar">
      <app-calendar></app-calendar>
    </aside>
  </div>
</section>
